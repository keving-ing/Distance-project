<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visor de accesibilidad - Lazio</title>
    <link rel="icon" href="logo_ping.png" type="image/png">
    <link rel="stylesheet" href="./src/style.css">
</head>
<body>
    
    <!-- üîπ Barra superiore -->
    <div id="topBar">
    <div id="topBarLeft">
        <span id="btnDistance" class="topbar-item">Analisi accessibilit√† EDUCAZIONE</span>
        <span class="topbar-item separator">|</span>
        <span id="btnDistanceSalud" class="topbar-item">Analisi accessibilit√† SALUTE</span>
        <span class="topbar-item separator">|</span>
        <span id="btnTransport" class="topbar-item">Accessibilit√† trasporto pubblico ROMA</span>
    </div>
    <div id="topBarRight">
        <button id="settingsBtn" class="settings-button">‚öôÔ∏è</button>
    </div>
    </div>


    <!-- üîß Pannello impostazioni -->
    <div id="settingsPanel" class="settings-modal">
        <div class="accordion">
            <div class="accordion-item">
                <button class="accordion-header" id="settingsInfoTitle">‚ÑπÔ∏è Informazioni sul progetto</button>
                <div class="settings-section-content scrollable-text">
                    <p id="settingsInfoText1">
                        Questa piattaforma √® parte di un progetto di analisi dell'accessibilit√† e della coesione territoriale, 
                        nato dalla collaborazione tra l'Universit√† Carlos III di Madrid e la Comunit√† di Madrid. Il 
                        visore √© stato sviluppato per visualizzare l'accessibilit√† ai servizi nella regione Lazio, 
                        integrando dati spaziali, distanze e modalit√† di trasporto.
                    </p>
                    <p id="settingsInfoText2">
                        Lo scopo del progetto √® quello di effettuare un benchmarking per un confronto sistematico tra le due realt√†.
                        Il modello si basa sul calcolo di un indicatore di accessibilit√† ai servizi pubblici, 
                        considerando esclusivamente i comuni con meno di 40.000 abitanti.
                    </p>
                    <p id="settingsInfoText3">
                        L‚Äôanalisi utilizza i nuclei urbani di ciascun comune come unit√† di base, 
                        permettendo anche la visualizzazione aggregata a livello comunale tramite una ponderazione 
                        basata sulla popolazione di ogni nucleo.
                    </p>
                    <p id="settingsInfoText4">
                        Lo strumento consente di esplorare in modo interattivo diversi indicatori relativi all‚Äôaccesso 
                        a servizi chiave, come la salute e l‚Äôistruzione, e di conoscere meglio il contesto territoriale di ciascuna area.
                    </p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" id="settingsUsageTitle">üìò Come usare il visore</button>
                <div class="settings-section-content scrollable-text">
                    <p><strong id="settingsUsageSection1Title">Men√∫ barra superiore</strong></p>
                    <p id="settingsUsageSection1Text">
                    Seleziona il tipo di servizio di cui vuoi visualizzare i dati di accessibilit√†:
                    <ul style="padding-left: 20px;" id="settingsUsageSection1List">
                        <li>EDUCAZIONE: per visualizzare un indicatore di accesso alle scuole dell'infanzia, primarie e secondarie.</li>
                        <li>SALUTE: accessibilit√† ai servizi sanitari come medicina generale, ospedali e pronto soccorso.</li>
                        <li>TRASPORTO PUBBLICO ROMA</strong>: accessibilit√† in trasporto pubblico nella provincia di Roma.</li>
                    </ul>
                    </p>

                    <p><strong id="settingsUsageSection2Title">Men√∫ scelta parametri</strong></p>
                    <p id="settingsUsageSection2Text">
                    Una volta selezionato il servizio nella barra superiore, si aprir√† un men√π che permette di scegliere
                    la tipologia del servizio, il modo di spostamento (es. distanza in auto con traffico) e il criterio (tempo o distanza). 
                    Nel riquadro √® anche presente un campo di ricerca in cui puoi digitare il nome di un comune e premendo il tasto INVIO: 
                    la mappa effettuer√† uno zoom automatico su di esso.
                    </p>

                    <p><strong id="settingsUsageSection3Title">Interazione con la mappa</strong></p>
                    <p id="settingsUsageSection3Text">
                    Dopo aver scelto i parametri, ogni comune sulla mappa verr√† colorato in base al valore dell‚Äôindicatore selezionato dopo aver settato tutti i parametri. 
                    Una legenda esplicativa mostrer√† i colori associati e passando il mouse sui comuni, 
                    apparir√† un riquadro in basso a sinistra con il valore dell'indicatore per quel comune. 
                    Cliccando su un comune, si aprir√† un pannello che mostra i nuclei urbani da cui √® stato calcolato il valore complessivo aggregato.
                    </p>

                    <p><strong id="settingsUsageSection4Title">Filtri</strong></p>
                    <p id="settingsUsageSection5Text">
                    Quando la mappa √® colorata, puoi applicare filtri per mostrare solo i comuni con una certa popolazione 
                    o appartenenti a una specifica regione.
                    </p>

                    <p><strong id="settingsUsageSection5Title">Cambio layer comuni / nuclei urbani</strong></p>
                    <p id="settingsUsageSection4Text">
                    In alto a destra puoi cambiare la visualizzazione tra i <strong>comuni</strong> e i <strong>nuclei urbani</strong> 
                    tramite un selettore. Questo ti consente di analizzare i dati in modo pi√π dettagliato.
                    </p>

                    <p><strong id="settingsUsageSection6Title">Metodologia utilizzata</strong></p>
                    <p id="settingsUsageSection6Text">
                    Per conoscere il metodo di calcolo delle distanze e consultare tutte le fonti dati,
                    puoi accedere al documento completo disponibile al seguente link: <a href="#" id="settingsUsageMethodLink">[link al documento]</a>
                    </p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" id="settingsLanguageTitle">üåê Lingua</button>
                <div class="accordion-content">
                    <select id="languageSelect">
                        <option value="it">üáÆüáπ Italiano</option>
                        <option value="en">üá¨üáß English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Mappa -->
    <div id="map" class="map"></div>
    <script type="module" src="./src/main.js"></script>

    <div id="popup" class="ol-popup" style="display: none;">
        <a href="#" id="popup-closer" class="ol-popup-closer">√ó</a>
        <div id="popup-content">
          <div id="popup-text"></div>
          <div id="popup-map"></div>
        </div>
    </div>

    <!-- üîπ Menu per la distanza -->
    <div id="controls" style="display: none;"> 
        <label id="labelSearchComune" for="searchComune">Cerca un comune:</label>
        <input type="text" id="searchComune" placeholder="Cerca un comune..." />

        <label id="labelEducationFilter" for="educationFilter">Distanza educazione:</label>
        <select id="educationFilter">
            <option value="">-- Seleziona --</option>
            <option value="SI">Infanzia</option>
            <option value="SP">Primaria</option>
            <option value="SS">Secondaria</option>
        </select>

        <label id="labelModeFilter" for="modeFilter">Modo:</label>
        <select id="modeFilter">
            <option value="">-- Seleziona --</option>
            <option value="DR">Driving con traffico</option>
        </select>

        <div id="extraFilterContainer" style="display: none;">
            <label id="labelExtraFilter" for="extraFilter">Scegli il criterio:</label>
            <select id="extraFilter">
                <option value="">-- Seleziona --</option>
                <option value="distanza">Distanza Km</option>
                <option value="tempo">Tempo</option>
            </select>
        </div>

        <button id="resetFilters">Mappa originale</button>
    </div>

    <!-- üîç Filtro avanzato -->
    <div id="filterToggleContainer">
        <button id="filterToggleBtn" title="Filter">
            <svg width="20" height="20" viewBox="0 0 24 24">
                <path fill="currentColor" d="M10 18h4v-2h-4v2zm-7-6v2h18v-2H3zm3-6v2h12V6H6z"/>
            </svg>
        </button>
    </div>

    <div id="filterPanel" style="display: none;">
        <label for="popFilter">Maximum population:</label>
        <input type="number" id="popFilter" placeholder="Ex. 40000" value="40000" />

        <label for="provinceFilter">Select a province:</label>
        <select id="provinceFilter" multiple size="5">
            <option value="ROMA">ROMA</option>
            <option value="FROSINONE">FROSINONE</option>
            <option value="LATINA">LATINA</option>
            <option value="RIETI">RIETI</option>
            <option value="VITERBO">VITERBO</option>
        </select>
        <button id="applyFiltersBtn">Filter</button>
    </div>


    <!-- üîπ Menu per l'accessibilit√† salute -->
    <div id="healthAnalysisControls" style="display: none;"> 
        <label id="labelSearchComuneSalute" for="searchComuneSalute">Cerca un comune:</label>
        <input type="text" id="searchComuneSalute" placeholder="Cerca un comune..." />

        <label id="labelHealthFilter" for="healthFilter">Accesso a servizi sanitari:</label>
        <select id="healthFilter">
            <option value="">-- Seleziona --</option>
            <option value="MG">Medicina Generale</option>
            <option value="OS">Ospedali</option>
            <option value="UR">Urgenza</option>
        </select>

        <label id="labelHealthModeFilter" for="healthModeFilter">Modo:</label>
        <select id="healthModeFilter">
            <option value="">-- Seleziona --</option>
            <option value="DR">Driving con traffico</option>
        </select>

        <div id="extraHealthFilterContainer" style="display: none;">
            <label id="labelExtraHealthFilter" for="extraHealthFilter">Scegli il criterio:</label>
            <select id="extraHealthFilter">
                <option value="">-- Seleziona --</option>
                <option value="distanza">Distanza Km</option>
                <option value="tempo">Tempo</option>
            </select>
        </div>

        <button id="resetHealthFilters">Mappa originale</button>
    </div>

    <!-- üîπ Menu per l'analisi del trasporto pubblico -->
    <div id="transportAnalysisControls" style="display: none;">
        <label id="labelSearchComune1" for="searchComune1">Cerca un comune:</label>
        <input type="text" id="searchComune1" placeholder="Cerca un comune..." />

        <label id="labelTipo" for="tipo">Accessibilit√° per:</label>
        <select id="tipo">
            <option value="">-- Seleziona --</option>
            <option value="SA">EDUCAZIONE</option>
            <option value="ED">SALUTE</option>
        </select>

        <div id="educationFilterContainer1" style="display: none;">
            <label id="labelEducationFilter1" for="educationFilter1">Distanza educazione:</label>
            <select id="educationFilter1">
                <option value="">-- Seleziona --</option>
                <option value="SI">Infanzia</option>
                <option value="SP">Primaria</option>
                <option value="SS">Secondaria</option>
            </select>
        </div>

        <div id="healthFilterContainer1" style="display: none;">
            <label id="labelHealthFilter1" for="healthFilter1">Distanza salute:</label>
            <select id="healthFilter1">
                <option value="">-- Seleziona --</option>
                <option value="MG">Medicina generale</option>
                <option value="OS">Ospedali</option>
            </select>
        </div>

        <div id="modFilterContainer1" style="display: none;">
            <label id="labelModalita" for="modalita">Modalit√°:</label>
            <select id="modalita">
                <option value="">-- Seleziona --</option>
                <option value="DR">Driving</option>
                <option value="PT">Transporto Pubblico</option>
                <option value="DI">Differenze</option>
            </select>
        </div>

        <div id="extraFilterContainer1" style="display: none;">
            <label id="labelExtraFilter1" for="extraFilter1">Scegli il criterio:</label>
            <select id="extraFilter1">
                <option value="">-- Seleziona --</option>
                <option value="distanza">Distanza Km</option>
                <option value="tempo">Tempo</option>
            </select>
        </div>

        <button id="outliers">Visualizzazione outliers</button>
        <button id="resetFilters1">Mappa originale</button>
    </div>

    <div id="infoBox" class="info-box">BOX</div>

    <div id="layerBox">
        <label id="layerBoxComunia"><input type="radio" id = "r" name="layer" value="comuni" checked> Comuni</label>
        <label id="layerBoxNucleia"><input type="radio" id = "r" name="layer" value="nuclei"> Nuclei Urbani</label>
    </div>

    <div id="color-bar-container" style="display: none;">
        <strong id="color-bar-title" style="margin-bottom: 10px;"></strong>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div style="position: relative;">
                <div id="color-bar" style="display: flex; flex-direction: column; position: relative;"></div>
                <div id="color-values" style="position: absolute; top: 0; right: -50px; display: flex; flex-direction: column; align-items: flex-end; justify-content: space-between; height: 100%; padding: 5px;">
                    <span id="min-value" style="margin-bottom: 20px; position: relative; right: -25px;"></span>  
                    <span id="max-value" style="margin-top: 20px; position: relative; right: -25px; top: -5px;"></span> 
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./src/uiEvents.js"></script>

</body>
</html>
